# 股票市场板块强弱指标系统产品需求文档 (PRD)

## 1. 目标和背景

### 目标
- 提供基于多周期均线的股票板块强度实时可视化
- 帮助投资者快速识别强势板块和个股
- 创建直观的板块强度热力图界面
- 通过排名和趋势分析提供可操作的洞察
- 为未来高级分析功能奠定基础

### 背景
本项目旨在满足中国股票市场对量化板块分析工具的需求。传统技术分析通常关注个股，但板块轮动和强度模式提供了宝贵的市场洞察。系统使用多周期均线（5、10、20、30、60天）计算综合强度得分，提供板块级别和个股级别的分析。该工具将帮助投资者识别新兴趋势、监控板块轮动，并做出数据驱动的投资决策。

### 变更日志
| 日期 | 版本 | 描述 | 作者 |
|------|---------|-------------|--------|
| 2025-09-20 | v1.0 | 初始PRD创建 | PM代理 |

## 2. 需求规格

### 功能需求 (FR)
1. **FR1**: 系统应显示带有颜色编码强度等级的板块热力图
2. **FR2**: 系统应计算并显示个股在多周期下的强度得分
3. **FR3**: 系统应提供按强度排名的板块和个股列表
4. **FR4**: 系统应支持按板块类型和行业分类进行筛选
5. **FR5**: 系统应允许选择时间周期（今日、本周、本月）
6. **FR6**: 系统应提供包含成分股分析的详细板块页面
7. **FR7**: 系统应提供包含多周期强度明细的详细个股页面
8. **FR8**: 系统应提供历史强度趋势图表功能

### 非功能需求 (NFR)
1. **NFR1**: 系统对用户交互的响应时间应在200ms内
2. **NFR2**: 数据可视化应在1秒内渲染完成
3. **NFR3**: 系统应支持多用户并发访问
4. **NFR4**: 应通过适当验证保持数据准确性
5. **NFR5**: UI应具有响应式设计，支持桌面和移动设备

## 3. 用户界面设计目标

### 整体UX愿景
创建一个专业、直观的金融分析界面，专注于数据可视化和快速洞察。界面应该让用户能够一目了然地识别强势板块和个股，同时提供深入的细节分析能力。

### 关键交互模式
- **点击探索**: 用户可以通过点击热力图区块直接进入板块详情
- **悬停预览**: 鼠标悬停时显示详细数据提示
- **快速筛选**: 侧边栏或顶部提供直观的筛选控件
- **时间轴控制**: 简单的时间周期选择器

### 核心屏幕和视图
1. **首页仪表板**: 板块热力图、强势板块TOP5、强势个股TOP10、市场强度指数
2. **板块详情页**: 板块强度趋势图、成分股列表、板块内个股排名、基本信息
3. **个股详情页**: 多周期强度明细、历史趋势、相对板块表现、个股信息
4. **排名列表页**: 可排序的板块和个股排名表格

### 品牌风格
采用简洁专业的金融界面风格，使用中性色调为主，配合清晰的数据可视化颜色编码（红-橙-黄-绿表示强度等级）。

### 目标设备和平台: Web响应式
支持PC浏览器完整功能和手机浏览器基础功能，确保主要功能跨设备可用。

## 4. 技术假设

### 仓库结构: Monorepo
采用单仓库结构管理前端Next.js和后端FastAPI代码，统一Docker化部署。

### 服务架构
- **前端**: Next.js + TypeScript + Tailwind CSS
- **后端**: Python + FastAPI + SQLAlchemy + asyncpg
- **数据库**: PostgreSQL 13+ 用于持久化存储
- **数据源**: AkShare 提供实时股票数据

### 测试要求
采用完整的测试金字塔策略：
- **前端测试**: Jest + React Testing Library
- **后端测试**: pytest + 异步测试
- **API测试**: 全面的接口测试覆盖

### 部署方案
- **Docker化**: 多阶段Docker构建，优化镜像大小
- **编排工具**: Docker Compose用于开发和生产环境
- **反向代理**: Nginx作为反向代理
- **数据库容器**: PostgreSQL容器化部署
- **数据持久化**: Docker volumes用于数据库数据持久化
- **基本健康检查**: 容器基础健康检查配置
- **资源管理**: 适当的Docker资源限制配置

## 5. Epic规划

### Epic 1: 基础架构与核心服务
建立项目基础架构，包括Docker化部署、数据库设置、核心API服务和基础前端框架。

### Epic 2: 数据获取与处理引擎
实现AkShare数据接入、数据清洗转换、自定义多周期强度计算算法。

### Epic 3: 板块强度可视化核心功能
实现板块热力图、强度排名列表、基础筛选功能和基础响应式适配。

### Epic 4: 详情页面与深度分析
实现板块详情页、个股详情页、历史趋势图表和多周期分析对比功能。

### Epic 5: 基础用户功能
实现用户注册、登录、注销功能和关注列表功能。

## 6. 下一步

### UX专家提示
基于此PRD文档，请设计直观专业的金融数据可视化界面，重点关注热力图交互和数据分析流程。

### 架构师提示
基于此PRD文档，请设计可扩展的技术架构，特别关注数据流水线性能和高并发处理能力。

---
*文档版本: 1.0*
*最后更新: 2025-09-20*